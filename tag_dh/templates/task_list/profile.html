{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Accounts View{% endblock %}</h1>
{% endblock %}

{% block content %}
<form action="{{ url_for('task_list.profiles') }}" method="GET">
    <button type="submit">Back To All Accounts</button>
</form>

<h3>Account Info</h3>
<p>User: {{ account.user }}</p>
<p>Role: {{ account.role }}</p>
<p>Team: {{ account.team.name or "No team currently." }}</p>
{% if badges %}
<p>Badges</p>
<ul>
    {% for badge in badges %}
    <li>{{ badge }}</li>
    {% endfor %}
</ul>
{% endif %}

{% if atleast("teacher") %}
<form action="{{ url_for('task_list.profilebadge', id=id) }}" method="POST">
    <input type="text" placeholder="Badges" name="badges"><br/>
    <button type="submit">Change</button>
</form>
{% endif %}

{% if submissions %}
<h3>Submissions</h3>
<table>
    {% for submission in submissions %}
    <tr>
        <td>{{ submission['text'] }}</td>
        {% if submission.percent_mark != None %}
        <td>{{ submission.percent_mark ~ '%' }}</td>
        {% else %}
        <td>Unmarked</td>
        {% endif %}

        <td>
            <form class="view_button" action="{{ url_for('task_list.submission', id=submission.id) }}" method="GET">
                <button type="submit">View</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endif %}

{% if atleast("admin") %}
<h3>Admin</h3>
<form action="{{ url_for('task_list.profilerole', id=id) }}" method="POST">
    <input type="text" placeholder="Role" name="role"><br/>
    <button type="submit">Change Role</button>
</form>
<form action="{{ url_for('task_list.profiledelete', id=id) }}" method="POST">
    <button type="submit">Remove User</button>
</form>
{% endif %}
{% endblock %}
